{#
You Are Here:
- Posts List for Ghostwind
- src/site/_includes/ghostwind/postslist.njk

How It Works:
- On build, this is placed on every page with `{% include template %}`
- Use `{% set postslist = VALUE %}` to choose what it displays
- This template can be selected for Archive, Blog, and Highlights

Dynamic Data:
- anything in {{ curly braces }} is a variable from frontmatter in a
  markdown file from src/site/blog or src/site/video
- aliases are defined in `{% set %}`
#}

{% for post in postslist %}

  {% set title = post.data.title %}
  {% set featuredImage = post.data.image_card or site.image_card %}
  {% set featuredImageAlt = 'Video clip thumbnail' or post.data.image_caption %}
  {% set postCredit = post.data.clipper or site.author_name %}
  {% set publishDate = post.data.date %}
  {% set excerpt = post.data.teaser %}

  <article class="w-full sm:w-1/2 md:w-1/3 px-2 pb-12">
    <a href="{{ post.url }}" class="h-full bg-white rounded overflow-hidden shadow-md hover:shadow-lg relative smooth no-underline hover:no-underline flex flex-col">
      <div class="relative pb-16/9">
        <img src="{{ featuredImage }}" class="absolute h-full w-full rounded-t object-cover">
      </div>
      <div class="px-6 pt-6 h-auto max-h-32 flex-grow">
        <p class="text-{{ theme.colors.main }}-800 text-xs md:text-sm {{ theme_ghostwind.fonts.postslist.tags }}">
        {% for tag in post.data.tags %}
          {%- if (tag != "post") and (tag != "page") -%}
            <span class="inline-block mr-2">{{ tag | upper }}</span>
          {%- endif -%}
        {% endfor %}
        </p>
        <h2 class="font-bold text-xl text-{{ theme.colors.main }}-900 {{ theme_ghostwind.fonts.postslist.title }} my-3 hover:underline">{{ title }}</h2>
        {% if excerpt %}
        <p class="text-{{ theme.colors.main }}-800 {{ theme_ghostwind.fonts.postslist.excerpt }} text-base mb-5">
          {{ excerpt | safe }}
        </p>
        {% endif %}
      </div>
      <div class="flex items-center justify-between inset-x-0 bottom-0 px-6 pb-6">
        <img class="w-8 h-8 rounded-full mr-4" src="{{ site.author_avatar }}" alt="Avatar of {{ site.author_name }}">
        <p class="text-{{ theme.colors.main }}-800 text-xs md:text-sm {{ theme_ghostwind.fonts.postslist.date }}">{{ publishDate | readableDate }}</p>
      </div>
    </a>
  </article>

{% endfor %}
